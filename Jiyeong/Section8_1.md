## 입출력 장치

장치 컨트롤러와 장치 드라이버로 소통을 하게 된다

입출력 장치는 마우스, 마이크 등 컴퓨터 외부에서 컴퓨터 내부와 정보를 주고받는 다고 할 수 있다. 보조 기억 장치도 입출력 장치이다

### 입출력 장치 정보 주고 받기

- 입출력 장치에는 종류가 너무나도 많다
    - 장치가 다양하면 장치마다 속도, 데이터 전송 형식 등도 다양하다
    - 다양한 입출력 장치와 정보를 주고 받는 방식을 규격화하기 어렵다.

그래서 데이터 전송 형식이 다양해진다. 이렇게 기기 들이 다양하게 존재하면 정보 주고 받는 방식을 규격화 하기가 어렵다

- CPU와 메모리 전송률은 높지만 입출력 장치의 데이터 전송률은 낮다. 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표가 전송률이다.
    - 1초에 CPU가 훨씬 더 많은 데이터를 주고 받을 수 있다고 할 수 있다.

이러한 이유로 입출력 장치를 컨트롤 하기 복잡하고 어려워진다. 그래서 나온 장치가 장치 컨트롤러이다. 입-줄력 장치는 장치 컨트롤러를 통해 컴퓨터와 연결된다. 이 장치 컨트롤러는 하드웨어이다. 이런 하드 웨어를 통해서 데이터를 주고 받게 된다고 할 수 있다

### 장치 컨트롤러의 역할

- CPU와 입출력 장치 간의 통신 중개
    - 일종의 번역가를 수행한다고 보면 된다고 한다. 규격화하기 어려운 문제를 조금 완화해준다
- 오류 검출
    - 오류 검사를 해주는 것
- 데이터 버퍼링
    - 전송률이 높은 장치와 낮은 장치 사이에 주고 받는 데이터를 버퍼라는 임시 저장 공간에 저장하여 전송률을 맞춰주는 것
    - 예를 들면 전송률이 빠른 CPU 에는 버퍼에서 빠르게 데이터를 내보내고 입출력 장치에는 천천히 속도에 맞게 내보내는 것이다.

### 장치 컨트롤러의 구조

장치 컨트롤러는 입출력 버스에 연결되어 있다. 버스를 통해서 데이터를 주고 받게 되는데 장치 컨트롤러에는 데이터 레지스터 상태 레지스터 제어 레지스터가 존재한다.

상태 레지스터와 제어 레지스터는 하나의 레지스터로 사용되기도 한다. 

- 데이터 레지스터
    - CPU와 입출력 사이에 주고 받을 데이터가 담기는 레지스터
    - RAM을 사용하기도 한다
- 상태 레지스터
    - 상태 정보를 저장한ㄷ다
        - 입출력 장치가 입출력 작업을 할 준비가 되었는지
        - 입출력 작업이 완료되었는지
        - 입출력 장치에 오류는 없었는지 등의 상태 정보이다
- 제어 레지스터
    - 입출력 장치가 수행할 내용에 대한 제어 정보이다.

### 장치 드라이버

장치 컨트롤러의 동작을 감지하고 제어하는 프로그램이다

장치 컨트롤러가 입출력 장치를 연결하기 위해 하드웨어적인 통로라면, 장치 드라이버는 입출력 장치를 연결하기 위한 소프트웨어적인 통로이다.

장치 드라이버가 설치가 되어 있으면 여러 회사의 장치를 인식하고 사용할 수 있게 된다. 예를 들면 CPU가 프린터기의 장치 컨트롤러를 어떻게 동작하는지 모른다면 있어도 사용할 수가 없다. 그럴 때 장치 드라이버로  CPU가 어떻게 동작하는지를 알려주는 통로라고 할 수 있다.

만약 입출력 장치가 컴퓨터와 잘 연결되지 않는다면 가장 먼저 보아야 할 것이 바로 장치 드라이버이다.

사실은 조금 더 정확하게는 장치 드라이버를 인식하고 실행시켜주는 주체는 바로 운영체제이다.

즉 CPU가 입출력 장치를 인식하고 동작하기 위해서는 동작하는 여부를 알려주는 장치 드라이버, 장치를 직접적으로 제어하는 장치 컨트롤러 그리고 그 드라이버를 인식하고 실행시켜주는 운영체제 실행하는 내용을 잘 연산하는  CPU의 동작으로 이루어진다.
