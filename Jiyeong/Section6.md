## RAM

주기억 장치는 메인 메모리이며 크게 RAM과 ROM 두 가지가 있고 메모리는 RAM을 지칭하는 경우가 많다.

### RAM의 특징

CPUdl RAM에 가져와서 명령을 실행한다. 즉 RAM에는 실행할 대상이 저장되어 있고 영구적인 저장 공간은 아니라서 보조기억 장치가 필요하다. 즉 RAM은 전원이 꺼지면 저장된 내용을 잃어버린다. 보관해야하는 것들을 보조기억 장치에 보관한다. SSD, HDD, USB 등이 보조기억 장치에 해당한다.

RAM은 휘발성 저장장치 보조기억 장치를 비휘발성 저장 장치라고 할 수 있다

### RAM이 크면 어떤 이점이 있을까?

RAM의 크기는 컴퓨터를 선정하는데 중요한 요소이다. RAM이 작다면 CPU가 한번에 동시에 프로그램을 실행할 수 있는 성능이 떨어지게 된다. 그 이유는 매번 보조 기억장치에서 새로 복사해서 RAM을 다시 가져와야 하기 때문이다. 그런데 RAM의 크기가 크면 그 반대로 한번에 RAM에 여러 개를 가지고 와서 보조기억 장치에서 다시 가져오는 과정이 줄어든다. 즉 메모리의 크기는 성능에 영향을 준다고 할 수 있다

### RAM의 종류

- DRAM
    
    dynamic ram으로 저장된 데이터가 동적으로 사라지는 RAM이다. 전원에 연결되어 있어도 동적으로 사라진다. 데이터 소멸을 막기 위해 주기적으로 재활성화(재충전) 해야한다.
    
    실제로 메모리에서 사용하는 램이 DRAM이다. 그 이유는 상대적으로 소비전력이 낮고 가격이 저렴하고 , 오밀 조리밀하게 설계할 수 있다, 즉 집접적도가 높아서 큰 용량으로 설계하기가 좋고 큰 용량을 저장하기가 좋다.
    
- SRAM
    
    static ram으로 데이터가 정적인 RAM이다. DRAM보다 일반적으로 입축력 속도가 더 빠르다. (전원이 연결되어 있지 않으면 사라진다) 그런데 DRAM과 반대로 소비전력이 높고 집적도가 낮아 크게 설계하기가 힘들고 비교적 가격도 높다, 
    
    그래서 대용량으로 설계할 필요는 없으나 빨라야 하는 장치에 사용된다. 주로 캐시 메모리에서 사용된다.
    
- SDRAM
    
    Synchronous DRAM으로 DRAM의 발전된 형태이다. 동기화된 RAM인데 클럭 신호와 동기화된 DRAM이라고 할 수 있다. 클럭 신호에 맞춰서 한번에 하나씩 데이터를 주고받을 수 있다. 클럭신호와 박자를 맞춰서 작동하는 발전된 형태의 DRAM
    
- DDR SDRAM
    
    Double data rate SDRAM으로 메모리로 사용되며 가장 대중적으로 사용되는 RAM으로 발전된 형태의 SDRAM이라고 생각하면 된다.
    
    Double data는 데이터를 주고 받는 데이터 양을 2배로 늘렸다. 대역폭은 데이터를 주고 받는 길의 너비인데 DDR SDRAM은 대역폭이 두배가 넓다.
    
    DDR2 SDRAM은 DDR SDRAM은  DDR SDRAM보다 대역폭이 2배 넓고 SDRAM보다 4배가 넓다. 
    
    현재는 DDR4 SDRAM가 가장 대중적으로 사용되는 SDRAM이다.
    

---

## 메모리의 주소 공간

메모리에 저장되어 있는 프로그램은 현재 메모리 몇 번지에 무엇이 저장되어 있는지 다 알 수가 없다. 왜냐하면 메모리에 저장된 값들은 계속 변하기 때문이다.  

- 실행되는 프로그램은 새로운 메모리에 적재
- 실행이 끝난 프로그램은 메모리에서 삭제
- 같은 프로그램을 실행하더라도 실행할 때마다 적재되는 주소가 다르다.

이러한 이유 때문에 두 가지 메모리 체계를 만들었다고 할 수 있다.

### 물리 주소

메모리 입장에서 바라본 주소

실제로 저장된 하드웨어 상의 주소

물리 주소는 실제로 저장된 주소이기 때문에 0번지가 1개이고 겹치는 주소가 있을 수 없다.

### 논리 주소

CPU와 실행 중인 프로그램 입장에서 바라본 주소

실행 중인 프로그램 각각에게 부여된 0번지부터 시작하는 주소

예를 들면 두 개의 프로그램이 있다면 그 프로그램 각각은 0번지 부터 시작하는 논리 주소를 가지고 있다. 즉 같은 주소 번지가 중복될 수 있다.

중복된 주소를 가지고 어떻게 명령을 처리할까, 중복된 주소를 가지고 있기 때문에 물리 주소로 변환해준 후 처리해주어야 한다.

### 논리 주소를 물리 주소로 변환하는 방법

MMU(메모리 관리 장치)라는 하드웨어에 의해 변환된다. 메모리로 부터 주소 버스로부터 데이터를 메모리로 가져와서 CPU로 가져갈 때는 MMU룰 통해서 논리주소로 전달되고 반대로 CPU에서 명령해서 데이터를 가지러 갈때는 메모리에서 MMU를 거쳐서 물리 주소에 접근해서 가져온다.

MMU는 논리 주소와 베이스 레지스터 값을 더해서 논리 주소를 물리 주소로 변환한다. 프로그램의 시작 주소가 담긴 레지스터가 베이스 레지스터이다. 

베이스 레지스터는 기준 주소라고 생각하면 된다. 물리 주소 상에서  베이스 레지스터가 가지고 있는 기준 주소에서 얼마나 떨어져 있는가가 논리 주소이다.

예를 들어 프로그램 A의 논리 논리 주소는 100번지라고 하면  MMU에서 베이스 레지스터에서는 15000번지 주소가 저장되어 있다면  실제로는 151000번지 물리 주소에 저장되어 있다고 볼 수 있다.

원래 프로그램이 가지고 있던 논리 주소 범위를 벗어난 명령어가 실행되었을 때는 다른 프로그램에 접근해버리게 된다. 이런 문제를 방지하고 다른 메모리 데이터들을 보호하기 위해서 한계 레지스터를 추가적인 레지스터로 메모리를 보호한다

이 경우는 0번지-999번지 논리주소를 가지고 실제로는 1000부터 1999번지 물리 주소에 실제로 저장된 프로그램이 있다고 하면 만약 CPU가 1500번지를 가져와라 한다면 

### 메모리 보호

프로그램 영역을 침범할 수 있는 명령어의 실행을 막는다

베이스 레지스터는 프로그램의 가장 작은 물리 주소를 저장한다면 한계 레지스터는 논리 주소의 최대 크기를 저장한다.

이는 프로그램이 가지고 있는 논리 주소 범위를 벗어나지 않도록 하기 위함이며 실제 물리 레지스터에는 베이스 레지스터 값보다는 크고 한계 레지스터+베이스 레지스터 값보다는 작게 설계되어 있다

CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 한계 레지스터보다 작은지를 항상 검사한다.
