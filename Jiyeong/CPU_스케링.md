## CPU 스케줄링

운영체제가 프로세스에게 공정하고 합리적으로 CPU 자원을 배분하는 것이다.

### 가장 공정한 CPU 스케줄링?

- 우선순위
    
    빨리 처리 해야 하는 프로세스를 우선순위를 선정하여 자원을 배분해주는 것
    
    - 입출력 작업이 많은 프로세스(입출력 집중 프로세스) > CPU 작업이 많은 프로세스(CPU 집중 프로세스)
        
        입출력 집중 프로세스는 잠깐 실행하고 나면 대기 상태에 많이 머물러 있게 되기 때문에 먼저 실행시키고 나서  CPU 집중 프로세스를 실행한다.
        
    - 우선순위는 PCB에 저장된다
    - 일부 우선순위는 사용자가 지정해줄 수 있다.
    - process Explorer (window)

## 우선순위를 어떻게 알고 처리할까?

PCB에 저장된 모든 PCB 내용을 하나하나 확인하는 것은 매우 비효율적이다. 입출력, 메모리 CPU등 새로운 프로세스는 계속 생성되기 때문에 순서를 확인하면서 하는 것은 좋지 않다

- 스케줄링 큐
    
    큐라고 하는 관점에서 선입 선출이 원칙이지만 스케줄링 큐에서는 항상 선입 선출일 필요는 없다.
    
    해당 스케줄링 큐에 프로세스가 들어가서 기다린다. 예시는 아래와 같다. 다른 스케줄링 큐가 있을 수 있다.
    
    - CPU 스케줄링 큐
    - 메모리 스케줄링 큐
    - 하드디스크 스케줄링 큐
    
    ### 준비 큐
    
    준비 상태에 접어든 프로세스들이 서는 줄
    
    준비 상태에서 대기하고 있는 프로세스가 차례대로 자신의 차례가 돼서 dispatch가 되면 실행 상태가 된다.
    
    타임 인터럽트가 발생하고 실행 상태가 끝나면 다시 준비 큐에 들어가게 된다.
    
    ### 대기 큐
    
    대기 상태에 접어든 프로세스들이 서는 줄
    
    입출력 작업을 해야 하는 경우에 잠깐 실행하고 CPU를 사용하지 않아도 되는 경우 대기 큐에 들어가서 대기하게 된다. 그 후 입출력 완료 인터럽트를 받으면 다시 준비 상태로 넘어가게 된다.
    
    보통 입출력 장치 별로 대기 큐가 존재하는 경우가 많다. 같은 장치를 요구한 프로세스들은 같은 큐에서 대기를 하게 된다. 각각의 자원 별로 같은 큐에 대기하게 된다.
    
    입출력 인터럽트를 받은 프로세스는 준비 큐에 들어가게 된다.
    

### 그렇다면 프로세스를 실행하다가 매우 급하게 CPU를 처리 해야하는 프로세스가 발생하면 어떻게 해야할까?

- 선점형 스케줄링 preemptive scheduling
    
    현재 CPU를 사용 중인 프로세스로부터 CPU 자원을 빼앗아 다른 프로세스에 할당한다
    
    프로세스마다 정해진 시간만큼 자원을 쓰고 돌아가게 끔 하는 것이다
    
    - 장점
        - 어느 한 프로세스의 자원 독점을 막고 프로세스들에 골고루 자원을 배분할 수 있다
    - 단점
        - 그만큼 문맥 교환 과정에서 오버 헤드가 발생할 수 있다.
- 비선점형 스케줄링 non - preemptive scheduling
    
    현재 CPU를 사용 중인 프로세스의 작업이 끝날 때까지 프로세스 기다린다.
    
    종료되거나 대기 상태가 되기 전까지는 자원을 선점할 수 없고 기다려야 한다
    
    - 장점
        - 선점형 스케줄링에 비해 문맥 교환에서 발생하는 오버헤드가 적다
    - 단점
        - 모든 프로세스가 골고루 자원을 이용하기가 어렵다.
